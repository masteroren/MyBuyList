$(document).ready(()=>{var n=$("#ingridiantsList"),e;n.hide();var o=$(".ingredients-container"),i=$(".update-ingrediant"),r=$(".add-ingrediant");i.hide();var t,s=t=>{if(n.addClass("ingridiant-list"),n.click(t=>{$("#ingridiantName").val(t.target.text),$("#ingridiantId").val(t.target.value),n.hide()}),t.length<3){n.hide();return}$.get("ASHX/Handler.ashx",{method:"GetIngrediants",searchQuery:t},t=>{t.results&&t.results.length!==0&&(n.text(""),$.each(t.results,(t,i)=>{n.append($("<option/>").text(i.FoodName).val(i.FoodId))}),n.show())},"json")},u=n=>{console.log("edit clicked...",n.target.dataset),$(".input-section-item.quantity0 input").val(n.target.dataset.quantity0===0?"":n.target.dataset.quantity0),$(".input-section-item.quantity1 select").val(n.target.dataset.quantity1),$(".input-section-item.unit select").val(n.target.dataset.unit),$(".input-section-item.name input").val(n.target.dataset.name),$(".input-section-item.remark input").val(n.target.dataset.howTo),i.show(),r.hide(),t=n.target.dataset.id},f=n=>{console.log("delete clicked...",n.target.dataset);var t=n.target.dataset.id;$(`.list-item-${t}`).remove()};$(".edit-ingrediant").click(u);$(".delete-ingrediant").click(f);i.click(()=>{var n=$(".input-section-item.quantity0 input").val(),f=$(".input-section-item.quantity1 select option:selected").text(),e=$(".input-section-item.quantity1 select").val(),o=$(".input-section-item.unit select option:selected").text(),s=$(".input-section-item.unit select").val(),u=$(".input-section-item.name input").val(),c=$(".input-section-item.remark input").val(),h=`${f}${n==="0"?"":n} ${o} ${u}`;$(`.list-item-${t} .display-name`)[0].innerText=h;$(`.list-item-${t} .edit-ingrediant`)[0].dataset.quantity0=n==="0"?"":n;$(`.list-item-${t} .edit-ingrediant`)[0].dataset.quantity1=e;$(`.list-item-${t} .edit-ingrediant`)[0].dataset.unit=s;$(`.list-item-${t} .edit-ingrediant`)[0].dataset.name=u;r.show();i.hide();$(".input-section-item.quantity0 input").val("");$(".input-section-item.quantity1 select").val("");$(".input-section-item.unit select").val("0");$(".input-section-item.name input").val("");$(".input-section-item.remark input").val("")});r.click(()=>{e({quantity0:$(".input-section-item.quantity0 input").val(),quantity1:$(".input-section-item.quantity1 select option:selected").text(),quantity1val:$(".input-section-item.quantity1 select").val(),unit:$(".input-section-item.unit select option:selected").text(),unitId:$(".input-section-item.unit select").val(),name:$(".input-section-item.name input").val(),nameId:$(".input-section-item.name select").val(),remark:$(".input-section-item.remark input").val()}),$.post("ASHX/Recipes.ashx",data,()=>{}),$(".input-section-item.quantity0 input").val(""),$(".input-section-item.quantity1 select").val(""),$(".input-section-item.unit select").val("0"),$(".input-section-item.name input").val(""),$(".input-section-item.remark input").val("")});e=n=>{if(n.name!==""){var i=`${n.quantity1}${n.quantity0} ${n.unit} ${n.name}`,t=$("<div/>").addClass(`list-item list-item-${n.nameId}`),r=$("<a/>").addClass("list-btn edit-ingrediant").text("עריכה").click(u).attr("data-id",n.nameId).attr("data-quantity0",n.quantity0).attr("data-quantity1",n.quantity1val).attr("data-unit",n.unitId).attr("data-name",n.name).attr("data-howto",n.remark),e=$("<a/>").addClass("list-btn delete-ingrediant").text("מחיקה").click(f).attr("data-id",n.nameId),s=$("<a/>").addClass("display-name").text(i);t.append(r).append(e).append(s);o.append(t)}};$("#updateIngridiant").hide();$("#ingridiantName").keyup(function(){var n=$("#ingridiantName").val();s(n)});$("#addIngridiant").mousedown(function(){$(this).css("background-image",'url("Images/btn_AddProduct_down.png")')});$("#addIngridiant").mouseup(function(){$(this).css("background-image",'url("Images/btn_AddProduct_over.png")')});$("#addIngridiant").mouseout(function(){$(this).css("background-image",'url("Images/btn_AddProduct_up.png")')});$("#addIngridiant").mouseover(function(){$(this).css("background-image",'url("Images/btn_AddProduct_over.png")')});$("#addIngridiant, #updateIngridiant").click(function(){var i=$("#mode").val(),n,t;switch(i){case"update":t=$("#selectedIndex").val();n=ingridiantsApi.GetItem(t);break;default:n=new Ingridiant;n.IngredientId=$("#ingridiantId").val()}if(n.RecipeId=recipeId,n.q=parseFloat($("#txtQuantity").val()),n.f=$("#"+fractionClientId+" option:selected").val()?parseFloat($("#"+fractionClientId+" option:selected").val().replace(",",".")):0,n.Quantity=n.q+n.f,n.FractionDisplay=$("#"+fractionClientId+" option:selected").text(),n.MeasureUnitName=$("#"+unitClientId+" option:selected").text(),n.MeasurementUnitId=$("#"+unitClientId).val(),n.FoodId=$("#ingridiantId").val(),n.FoodName=$("#ingridiantName").val(),n.Remarks=$("#"+foodRemarkClientId).val(),n.IsValid()){switch(i){case"update":ingridiantsApi.Update(n,t);break;default:ingridiantsApi.Add(n)}ShowList();$("#txtQuantity").val("");$("#"+fractionClientId).val("");$("#ingridiantName").val("");$("#"+foodRemarkClientId).val("");$("#addIngridiant").show();$("#updateIngridiant").hide();$("#mode").val("")}});$("#updateIngridiant").mousedown(function(){$(this).css("background-image",'url("Images/btn_EditProduct_down.png")')});$("#updateIngridiant").mouseup(function(){$(this).css("background-image",'url("Images/btn_EditProduct_over.png")')});$("#updateIngridiant").mouseout(function(){$(this).css("background-image",'url("Images/btn_EditProduct_up.png")')});$("#updateIngridiant").mouseover(function(){$(this).css("background-image",'url("Images/btn_EditProduct_over.png")')})});